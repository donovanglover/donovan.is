var m2=function(G){const J=G instanceof Element?G:G instanceof Node?G.parentElement:null,K=J?J.closest("input, button"):null;return(K===null||K===void 0?void 0:K.type)=="submit"?K:null},s2=function(G){const J=m2(G.target);if(J&&J.form)j2.set(J.form,J)},o2=function(G){switch(G.toLowerCase()){case"lazy":return N.lazy;default:return N.eager}},j=function(G){return new URL(G.toString(),document.baseURI)},C=function(G){let J;if(G.hash)return G.hash.slice(1);else if(J=G.href.match(/#(.*)$/))return J[1]},o=function(G,J){const K=(J===null||J===void 0?void 0:J.getAttribute("formaction"))||G.getAttribute("action")||G.action;return j(K)},r2=function(G){return(JG(G).match(/\.[^.]*$/)||[])[0]||""},n2=function(G){return!!r2(G).match(/^(?:|\.(?:htm|html|xhtml|php))$/)},t2=function(G,J){const K=KG(J);return G.href===j(K).href||G.href.startsWith(K)},P=function(G,J){return t2(G,J)&&n2(G)},l=function(G){const J=C(G);return J!=null?G.href.slice(0,-(J.length+1)):G.href},R=function(G){return l(G)},e2=function(G,J){return j(G).href==j(J).href},GG=function(G){return G.pathname.split("/").slice(1)},JG=function(G){return GG(G).slice(-1)[0]},KG=function(G){return QG(G.origin+G.pathname)},QG=function(G){return G.endsWith("/")?G:G+"/"},_=function(G){if(G.getAttribute("data-turbo-eval")=="false")return G;else{const J=document.createElement("script"),K=g("csp-nonce");if(K)J.nonce=K;return J.textContent=G.textContent,J.async=!1,WG(J,G),J}},WG=function(G,J){for(let{name:K,value:Q}of J.attributes)G.setAttribute(K,Q)},XG=function(G){const J=document.createElement("template");return J.innerHTML=G,J.content},$=function(G,{target:J,cancelable:K,detail:Q}={}){const W=new CustomEvent(G,{cancelable:K,bubbles:!0,composed:!0,detail:Q});if(J&&J.isConnected)J.dispatchEvent(W);else document.documentElement.dispatchEvent(W);return W},E=function(){return new Promise((G)=>requestAnimationFrame(()=>G()))},YG=function(){return new Promise((G)=>setTimeout(()=>G(),0))},ZG=function(){return Promise.resolve()},z2=function(G=""){return new DOMParser().parseFromString(G,"text/html")},A2=function(G,...J){const K=$G(G,J).replace(/^\n/,"").split("\n"),Q=K[0].match(/^\s+/),W=Q?Q[0].length:0;return K.map((X)=>X.slice(W)).join("\n")},$G=function(G,J){return G.reduce((K,Q,W)=>{const X=J[W]==void 0?"":J[W];return K+Q+X},"")},y=function(){return Array.from({length:36}).map((G,J)=>{if(J==8||J==13||J==18||J==23)return"-";else if(J==14)return"4";else if(J==19)return(Math.floor(Math.random()*4)+8).toString(16);else return Math.floor(Math.random()*15).toString(16)}).join("")},S=function(G,...J){for(let K of J.map((Q)=>Q===null||Q===void 0?void 0:Q.getAttribute(G)))if(typeof K=="string")return K;return null},jG=function(G,...J){return J.some((K)=>K&&K.hasAttribute(G))},a=function(...G){for(let J of G){if(J.localName=="turbo-frame")J.setAttribute("busy","");J.setAttribute("aria-busy","true")}},m=function(...G){for(let J of G){if(J.localName=="turbo-frame")J.removeAttribute("busy");J.removeAttribute("aria-busy")}},zG=function(G,J=2000){return new Promise((K)=>{const Q=()=>{G.removeEventListener("error",Q),G.removeEventListener("load",Q),K()};G.addEventListener("load",Q,{once:!0}),G.addEventListener("error",Q,{once:!0}),setTimeout(K,J)})},x2=function(G){switch(G){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}},AG=function(G){return G=="advance"||G=="replace"||G=="restore"},d=function(...G){const J=S("data-turbo-action",...G);return AG(J)?J:null},B2=function(G){return document.querySelector(`meta[name="${G}"]`)},g=function(G){const J=B2(G);return J&&J.content},xG=function(G,J){let K=B2(G);if(!K)K=document.createElement("meta"),K.setAttribute("name",G),document.head.appendChild(K);return K.setAttribute("content",J),K},f=function(G,J){var K;if(G instanceof Element)return G.closest(J)||f(G.assignedSlot||((K=G.getRootNode())===null||K===void 0?void 0:K.host),J)},BG=function(G){switch(G.toLowerCase()){case"get":return z.get;case"post":return z.post;case"put":return z.put;case"patch":return z.patch;case"delete":return z.delete}},OG=function(G){for(let J of G.querySelectorAll("turbo-stream")){const K=document.importNode(J,!0);for(let Q of K.templateElement.content.querySelectorAll("script"))Q.replaceWith(_(Q));J.replaceWith(K)}return G},VG=function(G){switch(G.toLowerCase()){case q.multipart:return q.multipart;case q.plain:return q.plain;default:return q.urlEncoded}},DG=function(G,J){const K=new FormData(G),Q=J===null||J===void 0?void 0:J.getAttribute("name"),W=J===null||J===void 0?void 0:J.getAttribute("value");if(Q)K.append(Q,W||"");return K},UG=function(G){if(G!=null){const K=(document.cookie?document.cookie.split("; "):[]).find((Q)=>Q.startsWith(G));if(K){const Q=K.split("=").slice(1).join("=");return Q?decodeURIComponent(Q):void 0}}},qG=function(G){return G.statusCode==200&&!G.redirected},NG=function(G,J){const K=new URLSearchParams;for(let[Q,W]of J){if(W instanceof File)continue;K.append(Q,W)}return G.search=K.toString(),G},V2=function(G,J){return G.querySelector(`#${J}[data-turbo-permanent]`)},D2=function(G){return G.querySelectorAll("[id][data-turbo-permanent]")},HG=function(G,J){return((J===null||J===void 0?void 0:J.getAttribute("formmethod"))||G.getAttribute("method"))!="dialog"},IG=function(G,J){if((J===null||J===void 0?void 0:J.hasAttribute("formtarget"))||G.hasAttribute("target")){const K=(J===null||J===void 0?void 0:J.getAttribute("formtarget"))||G.target;for(let Q of document.getElementsByName(K))if(Q instanceof HTMLIFrameElement)return!1;return!0}else return!0},CG=function(G){if(G.hasAttribute("target")){for(let J of document.getElementsByName(G.target))if(J instanceof HTMLIFrameElement)return!1;return!0}else return!0},TG=function(G){const J=document.createElement("meta");return J.setAttribute("name","turbo-permanent-placeholder"),J.setAttribute("content",G.id),J},wG=function(G){return G&&typeof G.focus=="function"},LG=function(G,J){if(G=="end"||G=="start"||G=="center"||G=="nearest")return G;else return J},PG=function(G,J){if(G=="auto"||G=="smooth")return G;else return J},yG=function(G){if(kG(G))return"script";else if(FG(G))return"stylesheet"},_G=function(G){return G.getAttribute("data-turbo-track")=="reload"},kG=function(G){return G.localName=="script"},MG=function(G){return G.localName=="noscript"},FG=function(G){const J=G.localName;return J=="style"||J=="link"&&G.getAttribute("rel")=="stylesheet"},RG=function(G,J){return G.localName=="meta"&&G.getAttribute("name")==J},EG=function(G){if(G.hasAttribute("nonce"))G.setAttribute("nonce","");return G},X2=function(G){return G>=200&&G<300},gG=function(G){const J=D2(document.documentElement),K={};for(let Q of J){const{id:W}=Q;for(let X of G.querySelectorAll("turbo-stream")){const Z=V2(X.templateElement.content,W);if(Z)K[W]=[Q,Z]}}return K},fG=function(G){var J;const K=(J=G.detail)===null||J===void 0?void 0:J.fetchResponse;if(K instanceof h)return K},bG=function(G){var J;return((J=G.contentType)!==null&&J!==void 0?J:"").startsWith(I.contentType)},Y2=function(G){Object.defineProperties(G,vG)},g2=function(){Y.start()},pG=function(G){Y.registerAdapter(G)},uG=function(G,J){Y.visit(G,J)},f2=function(G){Y.connectStreamSource(G)},b2=function(G){Y.disconnectStreamSource(G)},cG=function(G){Y.renderStreamMessage(G)},iG=function(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Y.clearCache()},lG=function(G){Y.setProgressBarDelay(G)},aG=function(G){k.confirmMethod=G},mG=function(G){Y.setFormMode(G)},Z2=function(G){if(G!=null){const J=document.getElementById(G);if(J instanceof D)return J}},$2=function(G,J){if(G){const K=G.getAttribute("src");if(K!=null&&J!=null&&e2(K,J))throw new Error(`Matching <turbo-frame id="${G.id}"> element has a source URL which references itself`);if(G.ownerDocument!==document)G=document.importNode(G,!0);if(G instanceof D)return G.connectedCallback(),G.disconnectedCallback(),G}};(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement,J={HTMLElement:function K(){return Reflect.construct(G,[],this.constructor)}};window.HTMLElement=J.HTMLElement,HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)})();(function(G){if(typeof G.requestSubmit=="function")return;G.requestSubmit=function(Q){if(Q)J(Q,this),Q.click();else Q=document.createElement("input"),Q.type="submit",Q.hidden=!0,this.appendChild(Q),Q.click(),this.removeChild(Q)};function J(Q,W){Q instanceof HTMLElement||K(TypeError,"parameter 1 is not of type 'HTMLElement'"),Q.type=="submit"||K(TypeError,"The specified element is not a submit button"),Q.form==W||K(DOMException,"The specified element is not owned by this form element","NotFoundError")}function K(Q,W,X){throw new Q("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+W+".",X)}})(HTMLFormElement.prototype);var j2=new WeakMap;(function(){if("submitter"in Event.prototype)return;let G=window.Event.prototype;if(("SubmitEvent"in window)&&/Apple Computer/.test(navigator.vendor))G=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",s2,!0),Object.defineProperty(G,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return j2.get(this.target)}})})();var N;(function(G){G.eager="eager",G.lazy="lazy"})(N||(N={}));class D extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super();this.loaded=Promise.resolve(),this.delegate=new D.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(G){if(G=="loading")this.delegate.loadingStyleChanged();else if(G=="complete")this.delegate.completeChanged();else if(G=="src")this.delegate.sourceURLChanged();else this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(G){if(G)this.setAttribute("src",G);else this.removeAttribute("src")}get loading(){return o2(this.getAttribute("loading")||"")}set loading(G){if(G)this.setAttribute("loading",G);else this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(G){if(G)this.setAttribute("disabled","");else this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(G){if(G)this.setAttribute("autoscroll","");else this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var G,J;return(J=(G=this.ownerDocument)===null||G===void 0?void 0:G.documentElement)===null||J===void 0?void 0:J.hasAttribute("data-turbo-preview")}}class h{constructor(G){this.response=G}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return j(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){if(this.isHTML)return this.response.clone().text();else return Promise.resolve(void 0)}header(G){return this.response.headers.get(G)}}var z;(function(G){G[G.get=0]="get",G[G.post=1]="post",G[G.put=2]="put",G[G.patch=3]="patch",G[G.delete=4]="delete"})(z||(z={}));class p{constructor(G,J,K,Q=new URLSearchParams,W=null){this.abortController=new AbortController,this.resolveRequestPromise=(X)=>{},this.delegate=G,this.method=J,this.headers=this.defaultHeaders,this.body=Q,this.url=K,this.target=W}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:G}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(G);try{this.delegate.requestStarted(this);const J=await fetch(this.url.href,G);return await this.receive(J)}catch(J){if(J.name!=="AbortError"){if(this.willDelegateErrorHandling(J))this.delegate.requestErrored(this,J);throw J}}finally{this.delegate.requestFinished(this)}}async receive(G){const J=new h(G);if($("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:J},target:this.target}).defaultPrevented)this.delegate.requestPreventedHandlingResponse(this,J);else if(J.succeeded)this.delegate.requestSucceededWithResponse(this,J);else this.delegate.requestFailedWithResponse(this,J);return J}get fetchOptions(){var G;return{method:z[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(G=this.delegate.referrer)===null||G===void 0?void 0:G.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===z.get}get abortSignal(){return this.abortController.signal}acceptResponseType(G){this.headers.Accept=[G,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(G){const J=new Promise((Q)=>this.resolveRequestPromise=Q);if($("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:G,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented)await J}willDelegateErrorHandling(G){return!$("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:G}}).defaultPrevented}}class O2{constructor(G,J){this.started=!1,this.intersect=(K)=>{const Q=K.slice(-1)[0];if(Q===null||Q===void 0?void 0:Q.isIntersecting)this.delegate.elementAppearedInViewport(this.element)},this.delegate=G,this.element=J,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){if(!this.started)this.started=!0,this.intersectionObserver.observe(this.element)}stop(){if(this.started)this.started=!1,this.intersectionObserver.unobserve(this.element)}}class I{static wrap(G){if(typeof G=="string")return new this(XG(G));else return G}constructor(G){this.fragment=OG(G)}}I.contentType="text/vnd.turbo-stream.html";var U;(function(G){G[G.initialized=0]="initialized",G[G.requesting=1]="requesting",G[G.waiting=2]="waiting",G[G.receiving=3]="receiving",G[G.stopping=4]="stopping",G[G.stopped=5]="stopped"})(U||(U={}));var q;(function(G){G.urlEncoded="application/x-www-form-urlencoded",G.multipart="multipart/form-data",G.plain="text/plain"})(q||(q={}));class k{static confirmMethod(G,J,K){return Promise.resolve(confirm(G))}constructor(G,J,K,Q=!1){if(this.state=U.initialized,this.delegate=G,this.formElement=J,this.submitter=K,this.formData=DG(J,K),this.location=j(this.action),this.method==z.get)NG(this.location,[...this.body.entries()]);this.fetchRequest=new p(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=Q}get method(){var G;const J=((G=this.submitter)===null||G===void 0?void 0:G.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return BG(J.toLowerCase())||z.get}get action(){var G;const J=typeof this.formElement.action==="string"?this.formElement.action:null;if((G=this.submitter)===null||G===void 0?void 0:G.hasAttribute("formaction"))return this.submitter.getAttribute("formaction")||"";else return this.formElement.getAttribute("action")||J||""}get body(){if(this.enctype==q.urlEncoded||this.method==z.get)return new URLSearchParams(this.stringFormData);else return this.formData}get enctype(){var G;return VG(((G=this.submitter)===null||G===void 0?void 0:G.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((G,[J,K])=>{return G.concat(typeof K=="string"?[[J,K]]:[])},[])}async start(){const{initialized:G,requesting:J}=U,K=S("data-turbo-confirm",this.submitter,this.formElement);if(typeof K==="string"){if(!await k.confirmMethod(K,this.formElement,this.submitter))return}if(this.state==G)return this.state=J,this.fetchRequest.perform()}stop(){const{stopping:G,stopped:J}=U;if(this.state!=G&&this.state!=J)return this.state=G,this.fetchRequest.cancel(),!0}prepareRequest(G){if(!G.isSafe){const J=UG(g("csrf-param"))||g("csrf-token");if(J)G.headers["X-CSRF-Token"]=J}if(this.requestAcceptsTurboStreamResponse(G))G.acceptResponseType(I.contentType)}requestStarted(G){var J;this.state=U.waiting,(J=this.submitter)===null||J===void 0||J.setAttribute("disabled",""),this.setSubmitsWith(),$("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(G,J){this.result={success:J.succeeded,fetchResponse:J}}requestSucceededWithResponse(G,J){if(J.clientError||J.serverError)this.delegate.formSubmissionFailedWithResponse(this,J);else if(this.requestMustRedirect(G)&&qG(J)){const K=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,K)}else this.state=U.receiving,this.result={success:!0,fetchResponse:J},this.delegate.formSubmissionSucceededWithResponse(this,J)}requestFailedWithResponse(G,J){this.result={success:!1,fetchResponse:J},this.delegate.formSubmissionFailedWithResponse(this,J)}requestErrored(G,J){this.result={success:!1,error:J},this.delegate.formSubmissionErrored(this,J)}requestFinished(G){var J;this.state=U.stopped,(J=this.submitter)===null||J===void 0||J.removeAttribute("disabled"),this.resetSubmitterText(),$("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!this.submitter||!this.submitsWith)return;if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const G=this.submitter;this.originalSubmitText=G.value,G.value=this.submitsWith}}resetSubmitterText(){if(!this.submitter||!this.originalSubmitText)return;if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const G=this.submitter;G.value=this.originalSubmitText}}requestMustRedirect(G){return!G.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(G){return!G.isSafe||jG("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var G;return(G=this.submitter)===null||G===void 0?void 0:G.getAttribute("data-turbo-submits-with")}}class M{constructor(G){this.element=G}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(G){return this.getElementForAnchor(G)!=null}getElementForAnchor(G){return G?this.element.querySelector(`[id='${G}'], a[name='${G}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(let J of this.element.querySelectorAll("[autofocus]"))if(J.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null)return J;else continue;return null}get permanentElements(){return D2(this.element)}getPermanentElementById(G){return V2(this.element,G)}getPermanentElementMapForSnapshot(G){const J={};for(let K of this.permanentElements){const{id:Q}=K,W=G.getPermanentElementById(Q);if(W)J[Q]=[K,W]}return J}}class u{constructor(G,J){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=(K)=>{if(!K.defaultPrevented){const Q=K.target instanceof HTMLFormElement?K.target:void 0,W=K.submitter||void 0;if(Q&&HG(Q,W)&&IG(Q,W)&&this.delegate.willSubmitForm(Q,W))K.preventDefault(),K.stopImmediatePropagation(),this.delegate.formSubmitted(Q,W)}},this.delegate=G,this.eventTarget=J}start(){if(!this.started)this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0}stop(){if(this.started)this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1}}class r{constructor(G,J){this.resolveRenderPromise=(K)=>{},this.resolveInterceptionPromise=(K)=>{},this.delegate=G,this.element=J}scrollToAnchor(G){const J=this.snapshot.getElementForAnchor(G);if(J)this.scrollToElement(J),this.focusElement(J);else this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(G){this.scrollToAnchor(C(G))}scrollToElement(G){G.scrollIntoView()}focusElement(G){if(G instanceof HTMLElement)if(G.hasAttribute("tabindex"))G.focus();else G.setAttribute("tabindex","-1"),G.focus(),G.removeAttribute("tabindex")}scrollToPosition({x:G,y:J}){this.scrollRoot.scrollTo(G,J)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(G){const{isPreview:J,shouldRender:K,newSnapshot:Q}=G;if(K)try{this.renderPromise=new Promise((A)=>this.resolveRenderPromise=A),this.renderer=G,await this.prepareToRenderSnapshot(G);const W=new Promise((A)=>this.resolveInterceptionPromise=A),X={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};if(!this.delegate.allowsImmediateRender(Q,X))await W;await this.renderSnapshot(G),this.delegate.viewRenderedSnapshot(Q,J),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(G)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(G.reloadReason)}invalidate(G){this.delegate.viewInvalidated(G)}async prepareToRenderSnapshot(G){this.markAsPreview(G.isPreview),await G.prepareToRender()}markAsPreview(G){if(G)this.element.setAttribute("data-turbo-preview","");else this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(G){await G.render()}finishRenderingSnapshot(G){G.finishRendering()}}class U2 extends r{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new M(this.element)}}class n{constructor(G,J){this.clickBubbled=(K)=>{if(this.respondsToEventTarget(K.target))this.clickEvent=K;else delete this.clickEvent},this.linkClicked=(K)=>{if(this.clickEvent&&this.respondsToEventTarget(K.target)&&K.target instanceof Element){if(this.delegate.shouldInterceptLinkClick(K.target,K.detail.url,K.detail.originalEvent))this.clickEvent.preventDefault(),K.preventDefault(),this.delegate.linkClickIntercepted(K.target,K.detail.url,K.detail.originalEvent)}delete this.clickEvent},this.willVisit=(K)=>{delete this.clickEvent},this.delegate=G,this.element=J}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(G){const J=G instanceof Element?G:G instanceof Node?G.parentElement:null;return J&&J.closest("turbo-frame, html")==this.element}}class t{constructor(G,J){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=(K)=>{if(K instanceof MouseEvent&&this.clickEventIsSignificant(K)){const Q=K.composedPath&&K.composedPath()[0]||K.target,W=this.findLinkFromClickTarget(Q);if(W&&CG(W)){const X=this.getLocationForLink(W);if(this.delegate.willFollowLinkToLocation(W,X,K))K.preventDefault(),this.delegate.followedLinkToLocation(W,X)}}},this.delegate=G,this.eventTarget=J}start(){if(!this.started)this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0}stop(){if(this.started)this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1}clickEventIsSignificant(G){return!(G.target&&G.target.isContentEditable||G.defaultPrevented||G.which>1||G.altKey||G.ctrlKey||G.metaKey||G.shiftKey)}findLinkFromClickTarget(G){return f(G,"a[href]:not([target^=_]):not([download])")}getLocationForLink(G){return j(G.getAttribute("href")||"")}}class e{constructor(G,J){this.delegate=G,this.linkInterceptor=new t(this,J)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(G,J,K){return this.delegate.willSubmitFormLinkToLocation(G,J,K)&&G.hasAttribute("data-turbo-method")}followedLinkToLocation(G,J){const K=document.createElement("form");for(let[w,F]of J.searchParams)K.append(Object.assign(document.createElement("input"),{type:"hidden",name:w,value:F}));const W=Object.assign(J,{search:""});K.setAttribute("data-turbo","true"),K.setAttribute("action",W.href),K.setAttribute("hidden","");const X=G.getAttribute("data-turbo-method");if(X)K.setAttribute("method",X);const Z=G.getAttribute("data-turbo-frame");if(Z)K.setAttribute("data-turbo-frame",Z);const A=d(G);if(A)K.setAttribute("data-turbo-action",A);const T=G.getAttribute("data-turbo-confirm");if(T)K.setAttribute("data-turbo-confirm",T);if(G.hasAttribute("data-turbo-stream"))K.setAttribute("data-turbo-stream","");this.delegate.submittedFormLinkToLocation(G,J,K),document.body.appendChild(K),K.addEventListener("turbo:submit-end",()=>K.remove(),{once:!0}),requestAnimationFrame(()=>K.requestSubmit())}}class G2{static async preservingPermanentElements(G,J,K){const Q=new this(G,J);Q.enter(),await K(),Q.leave()}constructor(G,J){this.delegate=G,this.permanentElementMap=J}enter(){for(let G in this.permanentElementMap){const[J,K]=this.permanentElementMap[G];this.delegate.enteringBardo(J,K),this.replaceNewPermanentElementWithPlaceholder(K)}}leave(){for(let G in this.permanentElementMap){const[J]=this.permanentElementMap[G];this.replaceCurrentPermanentElementWithClone(J),this.replacePlaceholderWithPermanentElement(J),this.delegate.leavingBardo(J)}}replaceNewPermanentElementWithPlaceholder(G){const J=TG(G);G.replaceWith(J)}replaceCurrentPermanentElementWithClone(G){const J=G.cloneNode(!0);G.replaceWith(J)}replacePlaceholderWithPermanentElement(G){const J=this.getPlaceholderById(G.id);J===null||J===void 0||J.replaceWith(G)}getPlaceholderById(G){return this.placeholders.find((J)=>J.content==G)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class c{constructor(G,J,K,Q,W=!0){this.activeElement=null,this.currentSnapshot=G,this.newSnapshot=J,this.isPreview=Q,this.willRender=W,this.renderElement=K,this.promise=new Promise((X,Z)=>this.resolvingFunctions={resolve:X,reject:Z})}get shouldRender(){return!0}get reloadReason(){return}prepareToRender(){return}finishRendering(){if(this.resolvingFunctions)this.resolvingFunctions.resolve(),delete this.resolvingFunctions}async preservingPermanentElements(G){await G2.preservingPermanentElements(this,this.permanentElementMap,G)}focusFirstAutofocusableElement(){const G=this.connectedSnapshot.firstAutofocusableElement;if(wG(G))G.focus()}enteringBardo(G){if(this.activeElement)return;if(G.contains(this.currentSnapshot.activeElement))this.activeElement=this.currentSnapshot.activeElement}leavingBardo(G){if(G.contains(this.activeElement)&&this.activeElement instanceof HTMLElement)this.activeElement.focus(),this.activeElement=null}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}class b extends c{static renderElement(G,J){var K;const Q=document.createRange();Q.selectNodeContents(G),Q.deleteContents();const W=J,X=(K=W.ownerDocument)===null||K===void 0?void 0:K.createRange();if(X)X.selectNodeContents(W),G.appendChild(X.extractContents())}constructor(G,J,K,Q,W,X=!0){super(J,K,Q,W,X);this.delegate=G}get shouldRender(){return!0}async render(){await E(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await E(),this.focusFirstAutofocusableElement(),await E(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const G=this.currentElement.firstElementChild,J=LG(this.currentElement.getAttribute("data-autoscroll-block"),"end"),K=PG(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(G)return G.scrollIntoView({block:J,behavior:K}),!0}return!1}activateScriptElements(){for(let G of this.newScriptElements){const J=_(G);G.replaceWith(J)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class V{static get defaultCSS(){return A2`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${V.animationDuration}ms ease-out,
          opacity ${V.animationDuration/2}ms ${V.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){if(!this.visible)this.visible=!0,this.installProgressElement(),this.startTrickling()}hide(){if(this.visible&&!this.hiding)this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})}setValue(G){this.value=G,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(G){this.progressElement.style.opacity="0",setTimeout(G,V.animationDuration*1.5)}uninstallProgressElement(){if(this.progressElement.parentNode)document.documentElement.removeChild(this.progressElement)}startTrickling(){if(!this.trickleInterval)this.trickleInterval=window.setInterval(this.trickle,V.animationDuration)}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const G=document.createElement("style");if(G.type="text/css",G.textContent=V.defaultCSS,this.cspNonce)G.nonce=this.cspNonce;return G}createProgressElement(){const G=document.createElement("div");return G.className="turbo-progress-bar",G}get cspNonce(){return g("csp-nonce")}}V.animationDuration=300;class q2 extends M{constructor(){super(...arguments);this.detailsByOuterHTML=this.children.filter((G)=>!MG(G)).map((G)=>EG(G)).reduce((G,J)=>{const{outerHTML:K}=J,Q=K in G?G[K]:{type:yG(J),tracked:_G(J),elements:[]};return Object.assign(Object.assign({},G),{[K]:Object.assign(Object.assign({},Q),{elements:[...Q.elements,J]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((G)=>this.detailsByOuterHTML[G].tracked).join("")}getScriptElementsNotInSnapshot(G){return this.getElementsMatchingTypeNotInSnapshot("script",G)}getStylesheetElementsNotInSnapshot(G){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",G)}getElementsMatchingTypeNotInSnapshot(G,J){return Object.keys(this.detailsByOuterHTML).filter((K)=>!(K in J.detailsByOuterHTML)).map((K)=>this.detailsByOuterHTML[K]).filter(({type:K})=>K==G).map(({elements:[K]})=>K)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((G,J)=>{const{type:K,tracked:Q,elements:W}=this.detailsByOuterHTML[J];if(K==null&&!Q)return[...G,...W];else if(W.length>1)return[...G,...W.slice(1)];else return G},[])}getMetaValue(G){const J=this.findMetaElementByName(G);return J?J.getAttribute("content"):null}findMetaElementByName(G){return Object.keys(this.detailsByOuterHTML).reduce((J,K)=>{const{elements:[Q]}=this.detailsByOuterHTML[K];return RG(Q,G)?Q:J},void 0)}}class B extends M{static fromHTMLString(G=""){return this.fromDocument(z2(G))}static fromElement(G){return this.fromDocument(G.ownerDocument)}static fromDocument({head:G,body:J}){return new this(J,new q2(G))}constructor(G,J){super(G);this.headSnapshot=J}clone(){const G=this.element.cloneNode(!0),J=this.element.querySelectorAll("select"),K=G.querySelectorAll("select");for(let[Q,W]of J.entries()){const X=K[Q];for(let Z of X.selectedOptions)Z.selected=!1;for(let Z of W.selectedOptions)X.options[Z.index].selected=!0}for(let Q of G.querySelectorAll('input[type="password"]'))Q.value="";return new B(G,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var G;const J=(G=this.getSetting("root"))!==null&&G!==void 0?G:"/";return j(J)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(G){return this.headSnapshot.getMetaValue(`turbo-${G}`)}}var L;(function(G){G.visitStart="visitStart",G.requestStart="requestStart",G.requestEnd="requestEnd",G.visitEnd="visitEnd"})(L||(L={}));var x;(function(G){G.initialized="initialized",G.started="started",G.canceled="canceled",G.failed="failed",G.completed="completed"})(x||(x={}));var SG={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},H;(function(G){G[G.networkFailure=0]="networkFailure",G[G.timeoutFailure=-1]="timeoutFailure",G[G.contentTypeMismatch=-2]="contentTypeMismatch"})(H||(H={}));class N2{constructor(G,J,K,Q={}){this.identifier=y(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=x.initialized,this.delegate=G,this.location=J,this.restorationIdentifier=K||y();const{action:W,historyChanged:X,referrer:Z,snapshot:A,snapshotHTML:T,response:i,visitCachedSnapshot:w,willRender:F,updateHistory:i2,shouldCacheSnapshot:l2,acceptsStreamResponse:a2}=Object.assign(Object.assign({},SG),Q);this.action=W,this.historyChanged=X,this.referrer=Z,this.snapshot=A,this.snapshotHTML=T,this.response=i,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=w,this.willRender=F,this.updateHistory=i2,this.scrolled=!F,this.shouldCacheSnapshot=l2,this.acceptsStreamResponse=a2}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){if(this.state==x.initialized)this.recordTimingMetric(L.visitStart),this.state=x.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this)}cancel(){if(this.state==x.started){if(this.request)this.request.cancel();this.cancelRender(),this.state=x.canceled}}complete(){if(this.state==x.started){if(this.recordTimingMetric(L.visitEnd),this.state=x.completed,this.followRedirect(),!this.followedRedirect)this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)}}fail(){if(this.state==x.started)this.state=x.failed,this.adapter.visitFailed(this)}changeHistory(){var G;if(!this.historyChanged&&this.updateHistory){const J=this.location.href===((G=this.referrer)===null||G===void 0?void 0:G.href)?"replace":this.action,K=x2(J);this.history.update(K,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){if(this.hasPreloadedResponse())this.simulateRequest();else if(this.shouldIssueRequest()&&!this.request)this.request=new p(this,z.get,this.location),this.request.perform()}simulateRequest(){if(this.response)this.startRequest(),this.recordResponse(),this.finishRequest()}startRequest(){this.recordTimingMetric(L.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(G=this.response){if(this.response=G,G){const{statusCode:J}=G;if(X2(J))this.adapter.visitRequestCompleted(this);else this.adapter.visitRequestFailedWithStatusCode(this,J)}}finishRequest(){this.recordTimingMetric(L.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:G,responseHTML:J}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot)this.cacheSnapshot();if(this.view.renderPromise)await this.view.renderPromise;if(X2(G)&&J!=null)await this.view.renderPage(B.fromHTMLString(J),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete();else await this.view.renderError(B.fromHTMLString(J),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const G=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(G&&(!C(this.location)||G.hasAnchor(C(this.location)))){if(this.action=="restore"||G.isPreviewable)return G}}getPreloadedSnapshot(){if(this.snapshotHTML)return B.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const G=this.getCachedSnapshot();if(G){const J=this.shouldIssueRequest();this.render(async()=>{if(this.cacheSnapshot(),this.isSamePage)this.adapter.visitRendered(this);else{if(this.view.renderPromise)await this.view.renderPromise;if(await this.view.renderPage(G,J,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),!J)this.complete()}})}}followRedirect(){var G;if(this.redirectedToLocation&&!this.followedRedirect&&((G=this.response)===null||G===void 0?void 0:G.redirected))this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0}goToSamePageAnchor(){if(this.isSamePage)this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(G){if(this.acceptsStreamResponse)G.acceptResponseType(I.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(G,J){}async requestSucceededWithResponse(G,J){const K=await J.responseHTML,{redirected:Q,statusCode:W}=J;if(K==void 0)this.recordResponse({statusCode:H.contentTypeMismatch,redirected:Q});else this.redirectedToLocation=J.redirected?J.location:void 0,this.recordResponse({statusCode:W,responseHTML:K,redirected:Q})}async requestFailedWithResponse(G,J){const K=await J.responseHTML,{redirected:Q,statusCode:W}=J;if(K==void 0)this.recordResponse({statusCode:H.contentTypeMismatch,redirected:Q});else this.recordResponse({statusCode:W,responseHTML:K,redirected:Q})}requestErrored(G,J){this.recordResponse({statusCode:H.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){if(!this.scrolled&&!this.view.forceReloaded){if(this.action=="restore")this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop();else this.scrollToAnchor()||this.view.scrollToTop();if(this.isSamePage)this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location);this.scrolled=!0}}scrollToRestoredPosition(){const{scrollPosition:G}=this.restorationData;if(G)return this.view.scrollToPosition(G),!0}scrollToAnchor(){const G=C(this.location);if(G!=null)return this.view.scrollToAnchor(G),!0}recordTimingMetric(G){this.timingMetrics[G]=(new Date()).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(G){switch(G){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){if(this.isSamePage)return!1;else if(this.action=="restore")return!this.hasCachedSnapshot();else return this.willRender}cacheSnapshot(){if(!this.snapshotCached)this.view.cacheSnapshot(this.snapshot).then((G)=>G&&this.visitCachedSnapshot(G)),this.snapshotCached=!0}async render(G){this.cancelRender(),await new Promise((J)=>{this.frame=requestAnimationFrame(()=>J())}),await G(),delete this.frame}cancelRender(){if(this.frame)cancelAnimationFrame(this.frame),delete this.frame}}class H2{constructor(G){this.progressBar=new V,this.showProgressBar=()=>{this.progressBar.show()},this.session=G}visitProposedToLocation(G,J){this.navigator.startVisit(G,(J===null||J===void 0?void 0:J.restorationIdentifier)||y(),J)}visitStarted(G){this.location=G.location,G.loadCachedSnapshot(),G.issueRequest(),G.goToSamePageAnchor()}visitRequestStarted(G){if(this.progressBar.setValue(0),G.hasCachedSnapshot()||G.action!="restore")this.showVisitProgressBarAfterDelay();else this.showProgressBar()}visitRequestCompleted(G){G.loadResponse()}visitRequestFailedWithStatusCode(G,J){switch(J){case H.networkFailure:case H.timeoutFailure:case H.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:J}});default:return G.loadResponse()}}visitRequestFinished(G){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(G){}pageInvalidated(G){this.reload(G)}visitFailed(G){}visitRendered(G){}formSubmissionStarted(G){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(G){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){if(this.progressBar.hide(),this.visitProgressBarTimeout!=null)window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout}showFormProgressBarAfterDelay(){if(this.formProgressBarTimeout==null)this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideFormProgressBar(){if(this.progressBar.hide(),this.formProgressBarTimeout!=null)window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout}reload(G){var J;$("turbo:reload",{detail:G}),window.location.href=((J=this.location)===null||J===void 0?void 0:J.toString())||window.location.href}get navigator(){return this.session.navigator}}class I2{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=(G)=>{for(let J of this.temporaryElements)J.remove()}}start(){if(!this.started)this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1)}stop(){if(this.started)this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1)}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const G=document.querySelectorAll(this.deprecatedSelector);if(G.length)console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`);return[...G]}}class C2{constructor(G,J){this.session=G,this.element=J,this.linkInterceptor=new n(this,J),this.formSubmitObserver=new u(this,J)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(G,J,K){return this.shouldRedirect(G)}linkClickIntercepted(G,J,K){const Q=this.findFrameElement(G);if(Q)Q.delegate.linkClickIntercepted(G,J,K)}willSubmitForm(G,J){return G.closest("turbo-frame")==null&&this.shouldSubmit(G,J)&&this.shouldRedirect(G,J)}formSubmitted(G,J){const K=this.findFrameElement(G,J);if(K)K.delegate.formSubmitted(G,J)}shouldSubmit(G,J){var K;const Q=o(G,J),W=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),X=j((K=W===null||W===void 0?void 0:W.content)!==null&&K!==void 0?K:"/");return this.shouldRedirect(G,J)&&P(Q,X)}shouldRedirect(G,J){if(G instanceof HTMLFormElement?this.session.submissionIsNavigatable(G,J):this.session.elementIsNavigatable(G)){const Q=this.findFrameElement(G,J);return Q?Q!=G.closest("turbo-frame"):!1}else return!1}findFrameElement(G,J){const K=(J===null||J===void 0?void 0:J.getAttribute("data-turbo-frame"))||G.getAttribute("data-turbo-frame");if(K&&K!="_top"){const Q=this.element.querySelector(`#${K}:not([disabled])`);if(Q instanceof D)return Q}}}class T2{constructor(G){this.restorationIdentifier=y(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=(J)=>{if(this.shouldHandlePopState()){const{turbo:K}=J.state||{};if(K){this.location=new URL(window.location.href);const{restorationIdentifier:Q}=K;this.restorationIdentifier=Q,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,Q)}}},this.onPageLoad=async(J)=>{await ZG(),this.pageLoaded=!0},this.delegate=G}start(){if(!this.started)addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href))}stop(){if(this.started)removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1}push(G,J){this.update(history.pushState,G,J)}replace(G,J){this.update(history.replaceState,G,J)}update(G,J,K=y()){const Q={turbo:{restorationIdentifier:K}};G.call(history,Q,"",J.href),this.location=J,this.restorationIdentifier=K}getRestorationDataForIdentifier(G){return this.restorationData[G]||{}}updateRestorationData(G){const{restorationIdentifier:J}=this,K=this.restorationData[J];this.restorationData[J]=Object.assign(Object.assign({},K),G)}assumeControlOfScrollRestoration(){var G;if(!this.previousScrollRestoration)this.previousScrollRestoration=(G=history.scrollRestoration)!==null&&G!==void 0?G:"auto",history.scrollRestoration="manual"}relinquishControlOfScrollRestoration(){if(this.previousScrollRestoration)history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}class w2{constructor(G){this.delegate=G}proposeVisit(G,J={}){if(this.delegate.allowsVisitingLocationWithAction(G,J.action))if(P(G,this.view.snapshot.rootLocation))this.delegate.visitProposedToLocation(G,J);else window.location.href=G.toString()}startVisit(G,J,K={}){this.stop(),this.currentVisit=new N2(this,j(G),J,Object.assign({referrer:this.location},K)),this.currentVisit.start()}submitForm(G,J){this.stop(),this.formSubmission=new k(this,G,J,!0),this.formSubmission.start()}stop(){if(this.formSubmission)this.formSubmission.stop(),delete this.formSubmission;if(this.currentVisit)this.currentVisit.cancel(),delete this.currentVisit}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(G){if(typeof this.adapter.formSubmissionStarted==="function")this.adapter.formSubmissionStarted(G)}async formSubmissionSucceededWithResponse(G,J){if(G==this.formSubmission){const K=await J.responseHTML;if(K){const Q=G.isSafe;if(!Q)this.view.clearSnapshotCache();const{statusCode:W,redirected:X}=J,A={action:this.getActionForFormSubmission(G),shouldCacheSnapshot:Q,response:{statusCode:W,responseHTML:K,redirected:X}};this.proposeVisit(J.location,A)}}}async formSubmissionFailedWithResponse(G,J){const K=await J.responseHTML;if(K){const Q=B.fromHTMLString(K);if(J.serverError)await this.view.renderError(Q,this.currentVisit);else await this.view.renderPage(Q,!1,!0,this.currentVisit);this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(G,J){console.error(J)}formSubmissionFinished(G){if(typeof this.adapter.formSubmissionFinished==="function")this.adapter.formSubmissionFinished(G)}visitStarted(G){this.delegate.visitStarted(G)}visitCompleted(G){this.delegate.visitCompleted(G)}locationWithActionIsSamePage(G,J){const K=C(G),Q=C(this.view.lastRenderedLocation),W=J==="restore"&&typeof K==="undefined";return J!=="replace"&&l(G)===l(this.view.lastRenderedLocation)&&(W||K!=null&&K!==Q)}visitScrolledToSamePageLocation(G,J){this.delegate.visitScrolledToSamePageLocation(G,J)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:G,formElement:J}){return d(G,J)||"advance"}}var O;(function(G){G[G.initial=0]="initial",G[G.loading=1]="loading",G[G.interactive=2]="interactive",G[G.complete=3]="complete"})(O||(O={}));class L2{constructor(G){this.stage=O.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:J}=this;if(J=="interactive")this.pageIsInteractive();else if(J=="complete")this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=G}start(){if(!this.started){if(this.stage==O.initial)this.stage=O.loading;document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0}}stop(){if(this.started)document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1}pageIsInteractive(){if(this.stage==O.loading)this.stage=O.interactive,this.delegate.pageBecameInteractive()}pageIsComplete(){if(this.pageIsInteractive(),this.stage==O.interactive)this.stage=O.complete,this.delegate.pageLoaded()}get readyState(){return document.readyState}}class P2{constructor(G){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=G}start(){if(!this.started)addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0}stop(){if(this.started)removeEventListener("scroll",this.onScroll,!1),this.started=!1}updatePosition(G){this.delegate.scrollPositionChanged(G)}}class y2{render({fragment:G}){G2.preservingPermanentElements(this,gG(G),()=>document.documentElement.appendChild(G))}enteringBardo(G,J){J.replaceWith(G.cloneNode(!0))}leavingBardo(){}}class _2{constructor(G){this.sources=new Set,this.started=!1,this.inspectFetchResponse=(J)=>{const K=fG(J);if(K&&bG(K))J.preventDefault(),this.receiveMessageResponse(K)},this.receiveMessageEvent=(J)=>{if(this.started&&typeof J.data=="string")this.receiveMessageHTML(J.data)},this.delegate=G}start(){if(!this.started)this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1)}stop(){if(this.started)this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1)}connectStreamSource(G){if(!this.streamSourceIsConnected(G))this.sources.add(G),G.addEventListener("message",this.receiveMessageEvent,!1)}disconnectStreamSource(G){if(this.streamSourceIsConnected(G))this.sources.delete(G),G.removeEventListener("message",this.receiveMessageEvent,!1)}streamSourceIsConnected(G){return this.sources.has(G)}async receiveMessageResponse(G){const J=await G.responseHTML;if(J)this.receiveMessageHTML(J)}receiveMessageHTML(G){this.delegate.receivedMessageFromStream(I.wrap(G))}}class s extends c{static renderElement(G,J){const{documentElement:K,body:Q}=document;K.replaceChild(J,Q)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:G,head:J}=document;G.replaceChild(this.newHead,J),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let G of this.scriptElements){const J=G.parentNode;if(J){const K=_(G);J.replaceChild(K,G)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class v extends c{static renderElement(G,J){if(document.body&&J instanceof HTMLBodyElement)document.body.replaceWith(J);else document.documentElement.appendChild(J)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){await this.mergeHead()}async render(){if(this.willRender)await this.replaceBody()}finishRendering(){if(super.finishRendering(),!this.isPreview)this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const G=this.mergeProvisionalElements(),J=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await G,await J}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const G=[];for(let J of this.newHeadStylesheetElements)G.push(zG(J)),document.head.appendChild(J);await Promise.all(G)}copyNewHeadScriptElements(){for(let G of this.newHeadScriptElements)document.head.appendChild(_(G))}async mergeProvisionalElements(){const G=[...this.newHeadProvisionalElements];for(let J of this.currentHeadProvisionalElements)if(!this.isCurrentElementInElementList(J,G))document.head.removeChild(J);for(let J of G)document.head.appendChild(J)}isCurrentElementInElementList(G,J){for(let[K,Q]of J.entries()){if(G.tagName=="TITLE"){if(Q.tagName!="TITLE")continue;if(G.innerHTML==Q.innerHTML)return J.splice(K,1),!0}if(Q.isEqualNode(G))return J.splice(K,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let G of this.currentHeadProvisionalElements)document.head.removeChild(G)}copyNewHeadProvisionalElements(){for(let G of this.newHeadProvisionalElements)document.head.appendChild(G)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let G of this.newBodyScriptElements){const J=_(G);G.replaceWith(J)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class k2{constructor(G){this.keys=[],this.snapshots={},this.size=G}has(G){return R(G)in this.snapshots}get(G){if(this.has(G)){const J=this.read(G);return this.touch(G),J}}put(G,J){return this.write(G,J),this.touch(G),J}clear(){this.snapshots={}}read(G){return this.snapshots[R(G)]}write(G,J){this.snapshots[R(G)]=J}touch(G){const J=R(G),K=this.keys.indexOf(J);if(K>-1)this.keys.splice(K,1);this.keys.unshift(J),this.trim()}trim(){for(let G of this.keys.splice(this.size))delete this.snapshots[G]}}class M2 extends r{constructor(){super(...arguments);this.snapshotCache=new k2(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(G,J=!1,K=!0,Q){const W=new v(this.snapshot,G,v.renderElement,J,K);if(!W.shouldRender)this.forceReloaded=!0;else Q===null||Q===void 0||Q.changeHistory();return this.render(W)}renderError(G,J){J===null||J===void 0||J.changeHistory();const K=new s(this.snapshot,G,s.renderElement,!1);return this.render(K)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(G=this.snapshot){if(G.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:J}=this;await YG();const K=G.clone();return this.snapshotCache.put(J,K),K}}getCachedSnapshotForLocation(G){return this.snapshotCache.get(G)}get snapshot(){return B.fromElement(this.element)}}class F2{constructor(G){this.selector="a[data-turbo-preload]",this.delegate=G}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});else this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(G){for(let J of G.querySelectorAll(this.selector))this.preloadURL(J)}async preloadURL(G){const J=new URL(G.href);if(this.snapshotCache.has(J))return;try{const Q=await(await fetch(J.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),W=B.fromHTMLString(Q);this.snapshotCache.put(J,W)}catch(K){}}}class R2{constructor(){this.navigator=new w2(this),this.history=new T2(this),this.preloader=new F2(this),this.view=new M2(this,document.documentElement),this.adapter=new H2(this),this.pageObserver=new L2(this),this.cacheObserver=new I2,this.linkClickObserver=new t(this,window),this.formSubmitObserver=new u(this,document),this.scrollObserver=new P2(this),this.streamObserver=new _2(this),this.formLinkClickObserver=new e(this,document.documentElement),this.frameRedirector=new C2(this,document.documentElement),this.streamMessageRenderer=new y2,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){if(!this.started)this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0}disable(){this.enabled=!1}stop(){if(this.started)this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1}registerAdapter(G){this.adapter=G}visit(G,J={}){const K=J.frame?document.getElementById(J.frame):null;if(K instanceof D)K.src=G.toString(),K.loaded;else this.navigator.proposeVisit(j(G),J)}connectStreamSource(G){this.streamObserver.connectStreamSource(G)}disconnectStreamSource(G){this.streamObserver.disconnectStreamSource(G)}renderStreamMessage(G){this.streamMessageRenderer.render(I.wrap(G))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(G){this.progressBarDelay=G}setFormMode(G){this.formMode=G}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(G,J){if(this.enabled)this.navigator.startVisit(G,J,{action:"restore",historyChanged:!0});else this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(G){this.history.updateRestorationData({scrollPosition:G})}willSubmitFormLinkToLocation(G,J){return this.elementIsNavigatable(G)&&P(J,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(G,J,K){return this.elementIsNavigatable(G)&&P(J,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(G,J,K)}followedLinkToLocation(G,J){const K=this.getActionForLink(G),Q=G.hasAttribute("data-turbo-stream");this.visit(J.href,{action:K,acceptsStreamResponse:Q})}allowsVisitingLocationWithAction(G,J){return this.locationWithActionIsSamePage(G,J)||this.applicationAllowsVisitingLocation(G)}visitProposedToLocation(G,J){Y2(G),this.adapter.visitProposedToLocation(G,J)}visitStarted(G){if(!G.acceptsStreamResponse)a(document.documentElement);if(Y2(G.location),!G.silent)this.notifyApplicationAfterVisitingLocation(G.location,G.action)}visitCompleted(G){m(document.documentElement),this.notifyApplicationAfterPageLoad(G.getTimingMetrics())}locationWithActionIsSamePage(G,J){return this.navigator.locationWithActionIsSamePage(G,J)}visitScrolledToSamePageLocation(G,J){this.notifyApplicationAfterVisitingSamePageLocation(G,J)}willSubmitForm(G,J){const K=o(G,J);return this.submissionIsNavigatable(G,J)&&P(j(K),this.snapshot.rootLocation)}formSubmitted(G,J){this.navigator.submitForm(G,J)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(G){this.renderStreamMessage(G)}viewWillCacheSnapshot(){var G;if(!((G=this.navigator.currentVisit)===null||G===void 0?void 0:G.silent))this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:G},J){const K=this.notifyApplicationBeforeRender(G,J),{defaultPrevented:Q,detail:{render:W}}=K;if(this.view.renderer&&W)this.view.renderer.renderElement=W;return!Q}viewRenderedSnapshot(G,J){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(G){this.preloader.preloadOnLoadLinksForView(G)}viewInvalidated(G){this.adapter.pageInvalidated(G)}frameLoaded(G){this.notifyApplicationAfterFrameLoad(G)}frameRendered(G,J){this.notifyApplicationAfterFrameRender(G,J)}applicationAllowsFollowingLinkToLocation(G,J,K){return!this.notifyApplicationAfterClickingLinkToLocation(G,J,K).defaultPrevented}applicationAllowsVisitingLocation(G){return!this.notifyApplicationBeforeVisitingLocation(G).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(G,J,K){return $("turbo:click",{target:G,detail:{url:J.href,originalEvent:K},cancelable:!0})}notifyApplicationBeforeVisitingLocation(G){return $("turbo:before-visit",{detail:{url:G.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(G,J){return $("turbo:visit",{detail:{url:G.href,action:J}})}notifyApplicationBeforeCachingSnapshot(){return $("turbo:before-cache")}notifyApplicationBeforeRender(G,J){return $("turbo:before-render",{detail:Object.assign({newBody:G},J),cancelable:!0})}notifyApplicationAfterRender(){return $("turbo:render")}notifyApplicationAfterPageLoad(G={}){return $("turbo:load",{detail:{url:this.location.href,timing:G}})}notifyApplicationAfterVisitingSamePageLocation(G,J){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:G.toString(),newURL:J.toString()}))}notifyApplicationAfterFrameLoad(G){return $("turbo:frame-load",{target:G})}notifyApplicationAfterFrameRender(G,J){return $("turbo:frame-render",{detail:{fetchResponse:G},target:J,cancelable:!0})}submissionIsNavigatable(G,J){if(this.formMode=="off")return!1;else{const K=J?this.elementIsNavigatable(J):!0;if(this.formMode=="optin")return K&&G.closest('[data-turbo="true"]')!=null;else return K&&this.elementIsNavigatable(G)}}elementIsNavigatable(G){const J=f(G,"[data-turbo]"),K=f(G,"turbo-frame");if(this.drive||K)if(J)return J.getAttribute("data-turbo")!="false";else return!0;else if(J)return J.getAttribute("data-turbo")=="true";else return!1}getActionForLink(G){return d(G)||"advance"}get snapshot(){return this.view.snapshot}}var vG={absoluteURL:{get(){return this.toString()}}};class E2{constructor(G){this.session=G}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(G){xG("turbo-cache-control",G)}}var S2={after(){this.targetElements.forEach((G)=>{var J;return(J=G.parentElement)===null||J===void 0?void 0:J.insertBefore(this.templateContent,G.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((G)=>G.append(this.templateContent))},before(){this.targetElements.forEach((G)=>{var J;return(J=G.parentElement)===null||J===void 0?void 0:J.insertBefore(this.templateContent,G)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((G)=>G.prepend(this.templateContent))},remove(){this.targetElements.forEach((G)=>G.remove())},replace(){this.targetElements.forEach((G)=>G.replaceWith(this.templateContent))},update(){this.targetElements.forEach((G)=>{G.innerHTML="",G.append(this.templateContent)})}},Y=new R2,hG=new E2(Y),{navigator:dG}=Y,sG=Object.freeze({__proto__:null,navigator:dG,session:Y,cache:hG,PageRenderer:v,PageSnapshot:B,FrameRenderer:b,start:g2,registerAdapter:pG,visit:uG,connectStreamSource:f2,disconnectStreamSource:b2,renderStreamMessage:cG,clearCache:iG,setProgressBarDelay:lG,setConfirmMethod:aG,setFormMode:mG,StreamActions:S2});class v2 extends Error{}class h2{constructor(G){this.fetchResponseLoaded=(J)=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:J})=>{const K=J.querySelector("#"+this.element.id);if(K&&this.previousFrameElement)K.replaceChildren(...this.previousFrameElement.children);delete this.previousFrameElement},this.element=G,this.view=new U2(this,this.element),this.appearanceObserver=new O2(this,this.element),this.formLinkClickObserver=new e(this,this.element),this.linkInterceptor=new n(this,this.element),this.restorationIdentifier=y(),this.formSubmitObserver=new u(this,this.element)}connect(){if(!this.connected){if(this.connected=!0,this.loadingStyle==N.lazy)this.appearanceObserver.start();else this.loadSourceURL();this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start()}}disconnect(){if(this.connected)this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop()}disabledChanged(){if(this.loadingStyle==N.eager)this.loadSourceURL()}sourceURLChanged(){if(this.isIgnoringChangesTo("src"))return;if(this.element.isConnected)this.complete=!1;if(this.loadingStyle==N.eager||this.hasBeenLoaded)this.loadSourceURL()}sourceURLReloaded(){const{src:G}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=G,this.element.loaded}completeChanged(){if(this.isIgnoringChangesTo("complete"))return;this.loadSourceURL()}loadingStyleChanged(){if(this.loadingStyle==N.lazy)this.appearanceObserver.start();else this.appearanceObserver.stop(),this.loadSourceURL()}async loadSourceURL(){if(this.enabled&&this.isActive&&!this.complete&&this.sourceURL)this.element.loaded=this.visit(j(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0}async loadResponse(G){if(G.redirected||G.succeeded&&G.isHTML)this.sourceURL=G.response.url;try{const J=await G.responseHTML;if(J){const K=z2(J);if(B.fromDocument(K).isVisitable)await this.loadFrameResponse(G,K);else await this.handleUnvisitableFrameResponse(G)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(G){this.proposeVisitIfNavigatedWithAction(G,G),this.loadSourceURL()}willSubmitFormLinkToLocation(G){return this.shouldInterceptNavigation(G)}submittedFormLinkToLocation(G,J,K){const Q=this.findFrameElement(G);if(Q)K.setAttribute("data-turbo-frame",Q.id)}shouldInterceptLinkClick(G,J,K){return this.shouldInterceptNavigation(G)}linkClickIntercepted(G,J){this.navigateFrame(G,J)}willSubmitForm(G,J){return G.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(G,J)}formSubmitted(G,J){if(this.formSubmission)this.formSubmission.stop();this.formSubmission=new k(this,G,J);const{fetchRequest:K}=this.formSubmission;this.prepareRequest(K),this.formSubmission.start()}prepareRequest(G){var J;if(G.headers["Turbo-Frame"]=this.id,(J=this.currentNavigationElement)===null||J===void 0?void 0:J.hasAttribute("data-turbo-stream"))G.acceptResponseType(I.contentType)}requestStarted(G){a(this.element)}requestPreventedHandlingResponse(G,J){this.resolveVisitPromise()}async requestSucceededWithResponse(G,J){await this.loadResponse(J),this.resolveVisitPromise()}async requestFailedWithResponse(G,J){await this.loadResponse(J),this.resolveVisitPromise()}requestErrored(G,J){console.error(J),this.resolveVisitPromise()}requestFinished(G){m(this.element)}formSubmissionStarted({formElement:G}){a(G,this.findFrameElement(G))}formSubmissionSucceededWithResponse(G,J){const K=this.findFrameElement(G.formElement,G.submitter);if(K.delegate.proposeVisitIfNavigatedWithAction(K,G.formElement,G.submitter),K.delegate.loadResponse(J),!G.isSafe)Y.clearCache()}formSubmissionFailedWithResponse(G,J){this.element.delegate.loadResponse(J),Y.clearCache()}formSubmissionErrored(G,J){console.error(J)}formSubmissionFinished({formElement:G}){m(G,this.findFrameElement(G))}allowsImmediateRender({element:G},J){const K=$("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:G},J),cancelable:!0}),{defaultPrevented:Q,detail:{render:W}}=K;if(this.view.renderer&&W)this.view.renderer.renderElement=W;return!Q}viewRenderedSnapshot(G,J){}preloadOnLoadLinksForView(G){Y.preloadOnLoadLinksForView(G)}viewInvalidated(){}willRenderFrame(G,J){this.previousFrameElement=G.cloneNode(!0)}async loadFrameResponse(G,J){const K=await this.extractForeignFrameElement(J.body);if(K){const Q=new M(K),W=new b(this,this.view.snapshot,Q,b.renderElement,!1,!1);if(this.view.renderPromise)await this.view.renderPromise;this.changeHistory(),await this.view.render(W),this.complete=!0,Y.frameRendered(G,this.element),Y.frameLoaded(this.element),this.fetchResponseLoaded(G)}else if(this.willHandleFrameMissingFromResponse(G))this.handleFrameMissingFromResponse(G)}async visit(G){var J;const K=new p(this,z.get,G,new URLSearchParams,this.element);return(J=this.currentFetchRequest)===null||J===void 0||J.cancel(),this.currentFetchRequest=K,new Promise((Q)=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,Q()},K.perform()})}navigateFrame(G,J,K){const Q=this.findFrameElement(G,K);Q.delegate.proposeVisitIfNavigatedWithAction(Q,G,K),this.withCurrentNavigationElement(G,()=>{Q.src=J})}proposeVisitIfNavigatedWithAction(G,J,K){if(this.action=d(K,J,G),this.action){const Q=B.fromElement(G).clone(),{visitCachedSnapshot:W}=G.delegate;G.delegate.fetchResponseLoaded=(X)=>{if(G.src){const{statusCode:Z,redirected:A}=X,T=G.ownerDocument.documentElement.outerHTML,w={response:{statusCode:Z,redirected:A,responseHTML:T},visitCachedSnapshot:W,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:Q};if(this.action)w.action=this.action;Y.visit(G.src,w)}}}}changeHistory(){if(this.action){const G=x2(this.action);Y.history.update(G,j(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(G){console.warn(`The response (${G.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(G.response)}willHandleFrameMissingFromResponse(G){this.element.setAttribute("complete","");const J=G.response,K=async(W,X={})=>{if(W instanceof Response)this.visitResponse(W);else Y.visit(W,X)};return!$("turbo:frame-missing",{target:this.element,detail:{response:J,visit:K},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(G){this.view.missing(),this.throwFrameMissingError(G)}throwFrameMissingError(G){const J=`The response (${G.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new v2(J)}async visitResponse(G){const J=new h(G),K=await J.responseHTML,{location:Q,redirected:W,statusCode:X}=J;return Y.visit(Q,{response:{redirected:W,statusCode:X,responseHTML:K}})}findFrameElement(G,J){var K;const Q=S("data-turbo-frame",J,G)||this.element.getAttribute("target");return(K=Z2(Q))!==null&&K!==void 0?K:this.element}async extractForeignFrameElement(G){let J;const K=CSS.escape(this.id);try{if(J=$2(G.querySelector(`turbo-frame#${K}`),this.sourceURL),J)return J;if(J=$2(G.querySelector(`turbo-frame[src][recurse~=${K}]`),this.sourceURL),J)return await J.loaded,await this.extractForeignFrameElement(J)}catch(Q){return console.error(Q),new D}return null}formActionIsVisitable(G,J){const K=o(G,J);return P(j(K),this.rootLocation)}shouldInterceptNavigation(G,J){const K=S("data-turbo-frame",J,G)||this.element.getAttribute("target");if(G instanceof HTMLFormElement&&!this.formActionIsVisitable(G,J))return!1;if(!this.enabled||K=="_top")return!1;if(K){const Q=Z2(K);if(Q)return!Q.disabled}if(!Y.elementIsNavigatable(G))return!1;if(J&&!Y.elementIsNavigatable(J))return!1;return!0}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(G){this.ignoringChangesToAttribute("src",()=>{this.element.src=G!==null&&G!==void 0?G:null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(G){this.ignoringChangesToAttribute("complete",()=>{if(G)this.element.setAttribute("complete","");else this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var G;const J=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),K=(G=J===null||J===void 0?void 0:J.content)!==null&&G!==void 0?G:"/";return j(K)}isIgnoringChangesTo(G){return this.ignoredAttributes.has(G)}ignoringChangesToAttribute(G,J){this.ignoredAttributes.add(G),J(),this.ignoredAttributes.delete(G)}withCurrentNavigationElement(G,J){this.currentNavigationElement=G,J(),delete this.currentNavigationElement}}class J2 extends HTMLElement{static async renderElement(G){await G.performAction()}async connectedCallback(){try{await this.render()}catch(G){console.error(G)}finally{this.disconnect()}}async render(){var G;return(G=this.renderPromise)!==null&&G!==void 0?G:this.renderPromise=(async()=>{const J=this.beforeRenderEvent;if(this.dispatchEvent(J))await E(),await J.detail.render(this)})()}disconnect(){try{this.remove()}catch(G){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((G)=>G.remove())}get duplicateChildren(){var G;const J=this.targetElements.flatMap((Q)=>[...Q.children]).filter((Q)=>!!Q.id),K=[...((G=this.templateContent)===null||G===void 0?void 0:G.children)||[]].filter((Q)=>!!Q.id).map((Q)=>Q.id);return J.filter((Q)=>K.includes(Q.id))}get performAction(){if(this.action){const G=S2[this.action];if(G)return G;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;else if(this.targets)return this.targetElementsByQuery;else this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const G=this.ownerDocument.createElement("template");return this.appendChild(G),G}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(G){throw new Error(`${this.description}: ${G}`)}get description(){var G,J;return(J=((G=this.outerHTML.match(/<[^>]+>/))!==null&&G!==void 0?G:[])[0])!==null&&J!==void 0?J:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:J2.renderElement}})}get targetElementsById(){var G;const J=(G=this.ownerDocument)===null||G===void 0?void 0:G.getElementById(this.target);if(J!==null)return[J];else return[]}get targetElementsByQuery(){var G;const J=(G=this.ownerDocument)===null||G===void 0?void 0:G.querySelectorAll(this.targets);if(J.length!==0)return Array.prototype.slice.call(J);else return[]}}class d2 extends HTMLElement{constructor(){super(...arguments);this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),f2(this.streamSource)}disconnectedCallback(){if(this.streamSource)b2(this.streamSource)}get src(){return this.getAttribute("src")||""}}D.delegateConstructor=h2;if(customElements.get("turbo-frame")===void 0)customElements.define("turbo-frame",D);if(customElements.get("turbo-stream")===void 0)customElements.define("turbo-stream",J2);if(customElements.get("turbo-stream-source")===void 0)customElements.define("turbo-stream-source",d2);(()=>{let G=document.currentScript;if(!G)return;if(G.hasAttribute("data-turbo-suppress-warning"))return;G=G.parentElement;while(G){if(G==document.body)return console.warn(A2`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,G.outerHTML);G=G.parentElement}})();window.Turbo=sG;g2();var p2=(G,J)=>{G.classList.add(J),setTimeout(()=>G.classList.remove(J),2500)},oG=(G,J)=>{G.addEventListener("click",()=>rG(G,J))},rG=async(G,J)=>{const K=J.querySelector("table")?tG(J):nG(J);try{await navigator.clipboard.writeText(K),p2(G,"checked")}catch(Q){p2(G,"error")}},nG=(G)=>{return[...G.querySelectorAll("code")].map((J)=>J.textContent).join("")},tG=(G)=>{return[...G.querySelectorAll("tr")].map((J)=>{J.querySelector("td:last-child")?.innerText}).join("")};function K2(){document.querySelectorAll("pre").forEach((G)=>{const J=document.createElement("div");J.className="copy-code",G.prepend(J),oG(J,G)})}var eG=function(G){try{const K=[...atob(G)].map((X)=>X.charCodeAt(0)),Q=new Uint8Array(K.length),W=new TextDecoder("utf-8");return Q.set(K),W.decode(Q)}catch(J){return console.error("Failed to decode Base64 string: ",J),null}},GJ=function(G){const J=G.getAttribute("data-encoded-email"),K=J&&eG(J);if(K)G.setAttribute("href",`mailto:${K}`);else G.style.display="none"};function Q2(){document.querySelectorAll("[data-encoded-email]").forEach(GJ)}var c2=function(G,J=!1){if(document.documentElement.setAttribute("data-theme",G),u2=G,J)localStorage.setItem("theme",G);const K=new CustomEvent("themeChanged",{detail:{theme:G}});window.dispatchEvent(K)},JJ=function(){c2(u2==="dark"?"light":"dark",!0)},u2=localStorage.getItem("theme")||document.documentElement.getAttribute("data-theme");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(G)=>{const J=G.matches?"dark":"light";c2(J)});function W2(){document.querySelector(".theme-switcher")?.addEventListener("click",JJ,!1)}document.addEventListener("turbo:load",()=>{K2(),Q2(),W2()});
